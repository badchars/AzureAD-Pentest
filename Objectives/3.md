## Objective 3 ***Part of - All kill chains***
```
Enumerate the following for the defcorphq tenant using AzureAD PowerShell module:
- Users
- Groups
- Devices
- Directory Roles Global Administrator
- All custom directory roles (AzureAD preview)
- Enterprise Application
```

- Connect to the tenant using the AzureAD modue with credentials of test@defcorphq.onmicrosoft.com
```powershell
Import-Module C:\AzAD\Tools\AzureAD\AzureAD.psd1
$passwd = ConvertTo-SecureString "SuperS3Cr31PAssw0rd!@l33t" -AsPlainText -Force
$creds = New-Object System.Management.Automation.PSCredential("test@defcorphq.onmicrosoft.com",$passwd)
Connect-AzureAD -Credential $creds
```

- Enumerate all users, use the below command:
```powershell
Get-AzureADUser -All $true
```

- List only the UPNs of the users, use the below command:
```powershell
Get-AzureADUser -All $true | select UserPrincipalName
```


-  List all the groups, use the below command:
```powershell
Get-AzureADGroup -All $true
```

- List all the devices:
```powershell
Get-AzureADDevice
```

- Get all the Global Administrators, use the below command:
```powershell
Get-AzureADDirectoryRole -Filter "DisplayName -eq 'Global Administrator' | Get-AzureADDirectoryRoleMember
```

- List custom roles, we need to use the AzureADPreview module. Import the AzureADPreview module and connect to the target tenant:
```powershell
Import-Module C:\AzAD\Tools\AzureADPreview\AzureADPreview.psd1
$passwd = ConvertTo-SecureString "SuperS3Cr31PAssw0rd!@l33t" -AsPlainText -Force
$creds = New-Object System.Management.Automation.PSCredential("test@defcorphq.onmicrosoft.com",$passwd)
Connect-AzureAD -Credential $creds

Get-AzureADMSRoleDefinition | ?{$_.IsBuiltin -eq $False} | select DisplayName
```